## 对象
Redis 并没有直接使用链表、跳表等数据结构来实现键值对数据库， 而是基于这些数据结构创建了一个对象系统， 这个系统包含String、list、hash、set和zset对象这五种类型的对象， 每种对象都用到了至少一种我们前面所介绍的数据结构。

通过这五种不同类型的对象， Redis 可以在执行命令之前， 根据对象的类型来判断一个对象是否可以执行给定的命令。 使用对象的另一个好处是， 我们可以针对不同的使用场景， 为对象设置多种不同的数据结构实现， 从而优化对象在不同场景下的使用效率。

除此之外， Redis 的对象系统还实现了基于**引用计数技术**的内存回收机制： 当程序不再使用某个对象的时候， 这个对象所占用的内存就会被自动释放； 另外， Redis 还通过引用计数技术实现了对象共享机制， 这一机制可以在适当的条件下， 通过让多个数据库键共享同一个对象来节约内存。

最后， Redis 的对象带有访问时间记录信息， 该信息可以用于计算数据库键的空转时长， 在服务器启用了 maxmemory 功能的情况下， 空转时长较大的那些键可能会优先被服务器删除。

## 实现
Redis 中的每个对象都由一个 redisObject 结构表示， 该结构中和保存数据有关的三个属性分别是 type 属性、 encoding 属性和 ptr 属性：
```
typedef struct redisObject {

    // 类型
    unsigned type:4;

    // 编码
    unsigned encoding:4;

    // 指向底层实现数据结构的指针
    void *ptr;

    // ...

} robj;
```

type记录的为对象的类型：

| 类型常量 | 对象的名称 |
| ----    | ---- | 
| REDIS_STRING|	字符串对象|
| REDIS_LIST|	列表对象|
| REDIS_HASH|	哈希对象|
| REDIS_SET	|集合对象|
| REDIS_ZSET|	有序集合对象|

对象底层锁采用的数据结构：

|对象所使用的底层数据结构|命令输出|
|----|----|
|整数|"int"|
|embstr|"embstr"|
|简单动态字符串|"raw"|
|字典|"hashtable"|
|双端链表|"linkedlist"|
|压缩列表|"ziplist"|
|整数集合|"intset"|
|跳跃表和字典|"skiplist"|
    
Redis 缓存保存的键值对来说， 键总是一个字符串对象， 而值则可以是字符串对象、list对象、哈希对象、set对象、zset对象的其中一种

### 字符串对象
字符串对象的编码可以是 int 、 raw 或者 embstr
