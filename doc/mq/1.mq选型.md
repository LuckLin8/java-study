1. 为什么使用消息队列?
   - `解耦`,例如a系统要发送数据到bcd三个系统,接口调用发送,这个时候维护会很麻烦,假如这个时候b系统不需要该数据了,
     e系统又需要该数据,接口的维护就异常麻烦,并且如果bcd系统挂了怎么解决?是不是要重新调用?
     如果使用mq进行解耦,只需要让bcd三个系统进行监听消息就可以了,是否重试消费只需要bcd系统自己决定
   - `异步`,同样假如一个接口需要abcd四个服务,并且每个服务都要对db进行写操作,这个时候接口的延时会很高,使用mq进行异步处理可以很好的降低接口延迟
   - `削峰`,如果每天下午1点会有10w的并发请求,而系统的最大处理能力只有1000,这个时候就可以通过mq进行削峰

2. 消息队列的缺点?
   - 系统的可用性会降低,消息的重复消费问题?消息丢失怎么解决?消息消费的顺序性如何保证?mq挂了又怎么办?
   - 一致性问题,a系统直接返回结果,bcd如果处理失败怎么解决?数据会不一致

3. kafka、activemq、rabbitmq、rocketmq都有什么优点缺点?

|特性|activemq|rabbitmq|rocketmq|kafka|
|----|----|----|----|----|
|单机吞吐量|万级,吞吐量比rocketmq和kafka低了一个数量级|万级,吞吐量比rocketmq和kafka低了一个数量级|10万级别,rocketmq是可以支撑高吞吐的mq|10w级别,高吞吐量是kafka的优点之一, 一般配合大数据系统做实时数据计算和日志采集|
|topic数量对吞吐量的影响|----|----|topic达到几百个或几千个级别,会造成吞吐量小幅下降,这是rocketmq的优点,在同等机器的情况下可以支撑大量的topic|topic从几十个到上百个时,吞吐量会大幅度下降,同等机器的情况下,kafka要保证topic不可太多|
|时效性|ms级|微秒级,rabbitmq 的优点,延迟最低|ms级|延迟在ms以内|
|可用性|高,主从架构实现高可用|高,主从架构实现高可用|非常高,分布式架构|非常高,kafka是分布式的,一个数据多个副本,少量数据宕机,不会丢失数据,不会导致不可用|
|消息可靠性|较低概率丢失数据|----|通过参数优化可以做到0丢失|通过参数优化可以做到0丢失|
|功能支持|mq领域的功能极具完备|基于erlang开发,所以并发能力强,性能好,延时低|较为完善,扩展性好|功能简单|
|优劣势总结|非常成熟,偶尔会丢消息,使用较少|性能好延时低,吞吐较低,mq功能完善|接口简单易用,吞吐高,性能好,分布式扩展,可靠性可用性都ok,还支持大规模的topic数量|功能少,优点突出,高吞吐,高可用,可靠性高,分布式任意扩展,缺点是topic数量不能过高影响吞吐,并且kafka有可能重复消费数据|



    
